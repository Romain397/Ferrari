{% extends 'base.html.twig' %}

{% block title %}Modifier un produit
{% endblock %}

{% block page_background %}img/admin.jpg{% endblock %}

{% block main %}
	<div class="row justify-content-center">
		<div class="col-lg-7 col-xl-6">
			<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
				<h1 class="mb-0 text-danger">✏️ Modifier: <strong>{{ product.name }}</strong></h1>
				<a href="{{ path('manage_store') }}" class="btn btn-secondary">Retour</a>
			</div>

			{{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
				{{ form_row(form.name, {'label': 'Nom du produit', 'attr': {'class': 'form-control', 'placeholder': 'Ex. Lunettes Ray-Ban Ferrari'}}) }}
				{{ form_row(form.type, {'label': 'Type de produit', 'attr': {'class': 'form-select'}}) }}
				{{ form_row(form.price, {'label': 'Prix (€)', 'attr': {'class': 'form-control', 'placeholder': 'Ex. 49.99', 'step': '0.01', 'min': '0'}}) }}
				{{ form_row(form.description, {'label': 'Description', 'attr': {'class': 'form-control', 'rows': '5', 'placeholder': 'Décrivez le produit (matière, taille, usage...)'}}) }}
				{{ form_row(form.imageFile, {'label': 'Remplacer l’image (fichier local)'}) }}

				{% if product.image %}
					<div class="mb-3">
						<small class="text-light-emphasis d-block mb-2">Image actuelle</small>
						<img src="{{ asset(product.image) }}" alt="{{ product.name }}" class="img-fluid rounded border border-secondary" style="max-height: 140px;">
					</div>
				{% endif %}

				<div class="d-flex gap-2 mt-4">
					<button type="submit" class="btn btn-danger w-100">Mettre à jour</button>
					<a href="{{ path('manage_store') }}" class="btn btn-secondary w-100">Annuler</a>
				</div>
			{{ form_end(form) }}
		</div>
	</div>
{% endblock %}
