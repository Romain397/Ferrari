{% extends 'base.html.twig' %}

{% block title %}Nouvel Article
{% endblock %}

{% block main %}
	<div class="row justify-content-center">
		<div class="col-md-8">
			<h1 class="mb-4">Créer un nouvel article de voiture</h1>

			{# Flash messages #}
			{% for label, messages in app.flashes %}
				{% for message in messages %}
					<div class="alert alert-{{ label }} alert-dismissible fade show" role="alert">
						{{ message }}
						<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
					</div>
				{% endfor %}
			{% endfor %}

			{# Formulaire avec désactivation de la validation HTML5 pour tester la validation serveur #}
			{{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

			{# Affichage erreurs globales #}
			{% if form.vars.errors|length > 0 %}
				<div class="alert alert-danger">
					{% for error in form.vars.errors %}
						<p>{{ error.message }}</p>
					{% endfor %}
				</div>
			{% endif %}

			{# Champs du formulaire avec Bootstrap #}
			<div class="mb-3">
				{{ form_label(form.model) }}
				{{ form_widget(form.model, {'attr': {'class': 'form-control'}}) }}
				{{ form_errors(form.model) }}
			</div>

			<div class="mb-3">
				{{ form_label(form.title) }}
				{{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
				{{ form_errors(form.title) }}
			</div>

			<div class="mb-3">
				{{ form_label(form.content) }}
				{{ form_widget(form.content, {'attr': {'class': 'form-control', 'rows': 5}}) }}
				{{ form_errors(form.content) }}
			</div>

			<div class="mb-3 form-check">
				{{ form_widget(form.highlight, {'attr': {'class': 'form-check-input'}}) }}
				{{ form_label(form.highlight, null, {'label_attr': {'class': 'form-check-label'}}) }}
				{{ form_errors(form.highlight) }}
			</div>

			<div class="mb-3">
				{{ form_label(form.year) }}
				{{ form_widget(form.year, {'attr': {'class': 'form-control'}}) }}
				{{ form_errors(form.year) }}
			</div>

			<button type="submit" class="btn btn-primary mt-3">Valider</button>

			{{ form_end(form) }}
		</div>
	</div>
{% endblock %}
