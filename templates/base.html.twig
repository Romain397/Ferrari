<!DOCTYPE html>
<html lang="fr-FR">
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}Mon site WEC
			{% endblock %}
		</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="{% block meta_description %}Actualites Ferrari, sport auto, produits et commandes.{% endblock %}">
		<link rel="icon" href="data:,">
		<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
		{% set currentRoute = app.request.attributes.get('_route')|default('') %}
		{% set pageBackground = 'img/accueil.jpg' %}
		{% if currentRoute in ['dashboard', 'manage_posts', 'manage_store', 'manage_store_edit', 'manage_users'] %}
			{% set pageBackground = 'img/admin.jpg' %}
		{% elseif currentRoute in ['store', 'cart_index', 'orders_index'] %}
			{% set pageBackground = 'img/store.jpg' %}
		{% elseif currentRoute == 'sport_auto' %}
			{% set pageBackground = 'img/sport.jpg' %}
		{% elseif currentRoute == 'app_login' %}
			{% set pageBackground = 'img/login.jpg' %}
		{% elseif currentRoute == 'app_register' %}
			{% set pageBackground = 'img/sign-in.jpg' %}
		{% endif %}

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="{{ asset('style.css') }}">
	</head>
	<body class="text-light route-{{ currentRoute|default('home') }}" data-user-authenticated="{{ app.user ? '1' : '0' }}">
		<header class="mb-4">
			{% block menu %}
				{% include 'partials/menu.html.twig' %}
			{% endblock %}
		</header>

		<div class="container mt-3">
			{% for label, messages in app.flashes %}
				{% set alertType = label in ['success', 'danger', 'warning', 'info', 'primary', 'secondary'] ? label : (label == 'error' ? 'danger' : 'success') %}
				{% for message in messages %}
					<div class="alert alert-{{ alertType }} alert-dismissible fade show" role="alert">
						{{ message }}
						<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
					</div>
				{% endfor %}
			{% endfor %}
		</div>

		<main class="container py-5">
			{% block main %}{% endblock %}
		</main>

		<footer class="mt-5 text-center text-light py-4 border-top border-secondary">
			{% block footer %}
				&copy; 2026 Mon site WEC
			{% endblock %}
		</footer>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
		<script src="{{ asset('cart.js') }}" defer></script>
	</body>
</html>
