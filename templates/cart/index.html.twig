{% extends 'base.html.twig' %}

{% block title %}Panier
{% endblock %}

{% block main %}
	<h1 class="text-danger mb-4">Mon Panier</h1>

	<div id="cart-page" class="cart-page" data-ordered="{{ app.request.query.get('ordered') ? '1' : '0' }}">
		<div id="cart-empty" class="alert alert-dark border border-danger" style="display:none;">
			Votre panier est vide.
		</div>

		<div id="cart-content" style="display:none;">
			<div class="table-responsive">
				<table class="table align-middle">
					<thead>
						<tr>
							<th>Produit</th>
							<th>Prix</th>
							<th>Quantité</th>
							<th>Total</th>
						</tr>
					</thead>
					<tbody id="cart-items"></tbody>
				</table>
			</div>

			<div class="d-flex justify-content-between align-items-center mt-4 flex-wrap gap-3">
				<p class="mb-0 fs-5">
					Total:
					<strong class="text-danger" id="cart-total">0.00 €</strong>
				</p>

				<form method="post" action="{{ path('cart_checkout') }}" id="checkout-form" class="checkout-form-inline">
					<input type="hidden" name="cart_items" id="cart-items-input">
					<input type="hidden" name="_token" value="{{ csrf_token('cart_checkout') }}">
					<button type="submit" class="btn btn-danger">Passer la commande</button>
				</form>
			</div>

			{% if not app.user %}
				<p class="mt-3 mb-0 text-warning">
					Vous devez être connecté pour passer la commande.
					<a href="{{ path('app_login') }}" class="text-gold">Se connecter</a>
				</p>
			{% endif %}
		</div>
	</div>
{% endblock %}
